Let AST of a programming language be defined as follows:

class Program: #decl:List[Decl]

class Decl(ABC): #abstract class

class VarDecl(Decl): #name:str,typ:Type

class ConstDecl(Decl): #name:str,val:Lit

class FuncDecl(Decl): #name:str,param:List[VarDecl],body:List[Decl]

class Type(ABC): #abstract class

class IntType(Type)

class FloatType(Type)

class Lit(ABC): #abstract class

class IntLit(Lit): #val:int

and exceptions:

class RedeclaredVariable(Exception): #name:str

class RedeclaredConstant(Exception): #name:str

class RedeclaredFunction(Exception): #name:str

Implement the methods of the following class Visitor to travel on the above AST to detect redeclared declarations (throw the exception corresponding to the second declaration with the same name) in the same scope:

class StaticCheck(Visitor):

    def visitProgram(self,ctx:Program,o:object): pass

    def visitVarDecl(self,ctx:VarDecl,o:object):pass

    def visitConstDecl(self,ctx:ConstDecl,o:object):pass

    def visitFuncDecl(self,ctx:FuncDecl,o:object):pass

    def visitIntType(self,ctx:IntType,o:object):pass

    def visitFloatType(self,ctx:FloatType,o:object):pass

    def visitIntLit(self,ctx:IntLit,o:object):pass

Your code starts at line 55


from functools import reduce
class StaticCheck(Visitor):
    def visitProgram(self,ctx:Program,o:object):
        reduce(lambda acc,ele: acc + [ele.accept(self, acc)], ctx.decl,[])
    
    def visitVarDecl(self,ctx:VarDecl,o:object):
        if (ctx.name in o):
            raise RedeclaredVariable(ctx.name)
        else:
            return ctx.name
    
    def visitFuncDecl(self,ctx:FuncDecl,o:object):
        reduce(lambda acc,ele: acc + [ele.accept(self, acc)], ctx.param + ctx.body,[]) 
        if (ctx.name in o):
            raise RedeclaredFunction(ctx.name)
        else:
            return ctx.name
    
    def visitConstDecl(self,ctx:ConstDecl,o:object):
        if (ctx.name in o):
            raise RedeclaredConstant(ctx.name)
        else:
            return ctx.name

    def visitIntType(self,ctx:IntType,o:object):pass

    def visitFloatType(self,ctx:FloatType,o:object):pass

    def visitIntLit(self,ctx:IntLit,o:object):pass

x = Program([VarDecl("a",IntType()),ConstDecl("b",IntLit(3)),FuncDecl("a",[],[])])
Redeclared Function: a
	
x = Program([VarDecl("b",IntType()),FuncDecl("a",[VarDecl("a",FloatType())],[ConstDecl("c",IntLit(3)),VarDecl("b",IntType()),VarDecl("c",IntType())])])
Redeclared Variable: c
	
x = Program([VarDecl("b",IntType()),FuncDecl("a",[VarDecl("m",FloatType()),VarDecl("b",IntType()),VarDecl("m",FloatType())],[ConstDecl("c",IntLit(3)),VarDecl("d",IntType())])])
Redeclared Variable: m
	
x = Program([VarDecl("b",IntType()),FuncDecl("a",[VarDecl("m",FloatType()),VarDecl("b",IntType()),VarDecl("d",FloatType())],[ConstDecl("c",IntLit(3)),VarDecl("d",IntType())])])
Redeclared Variable: d

x = Program([VarDecl("b",IntType()),FuncDecl("a",[VarDecl("m",FloatType()),VarDecl("b",IntType()),VarDecl("d",FloatType())],[ConstDecl("c",IntLit(3)),FuncDecl("d",[],[])])])
Redeclared Function: d

x = Program([VarDecl("b",IntType()),FuncDecl("a",[VarDecl("m",FloatType()),VarDecl("b",IntType()),VarDecl("d",FloatType())],[ConstDecl("c",IntLit(3)),FuncDecl("foo",[VarDecl("x",IntType())],[VarDecl("x",IntType())])])])
Redeclared Variable: x
