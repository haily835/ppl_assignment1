Given the AST declarations as follows:

class Exp(ABC): #abstract class

class BinOp(Exp): #op:str,e1:Exp,e2:Exp #op is +,-,*,/,&&,||, >, <, ==, or  !=

class UnOp(Exp): #op:str,e:Exp #op is -, !

class IntLit(Exp): #val:int

class FloatLit(Exp): #val:float

class BoolLit(Exp): #val:bool

and the Visitor class is declared as follows:

class StaticCheck(Visitor):

    def visitBinOp(self,ctx:BinOp,o): pass

    def visitUnOp(self,ctx:UnOp,o):pass

    def visitIntLit(self,ctx:IntLit,o): pass 

    def visitFloatLit(self,ctx,o): pass

    def visitBoolLit(self,ctx,o): pass

Rewrite the body of the methods in class StaticCheck to check the following type constraints:

+ , - and * accept their operands in int or float type and return float type if at least one of their operands is in float type, otherwise, return int type
/ accepts their operands in int or float type and returns float type
!, && and || accept their operands in bool type and return bool type
>, <, == and != accept their operands in any type but must in the same type and return bool type 
If the expression does not conform the type constraints, the StaticCheck will raise exception TypeMismatchInExpression with the innermost sub-expression that contains type mismatch.
Your code starts at line 55


class StaticCheck(Visitor):
    
    def visitBinOp(self,ctx:BinOp,o):
        if ctx.op == "+" or ctx.op == "-" or ctx.op == "*" or ctx.op == "/":
            if (isinstance(ctx.e1.accept(self, None), bool) or isinstance(ctx.e2.accept(self, None), bool)):
                raise TypeMismatchInExpression(ctx)
            elif (isinstance(ctx.e1.accept(self, None),float) or isinstance(ctx.e2.accept(self, None),float) or ctx.op == "/"):
                return float()
            else:
                return int()
        elif ctx.op == "&&" or ctx.op == "||":
            if (isinstance(ctx.e1.accept(self, None), bool) and isinstance(ctx.e2.accept(self, None),bool)):
                return bool()
            else:
                raise TypeMismatchInExpression(ctx)
        elif ctx.op == ">" or ctx.op == "<" or ctx.op == "==" or ctx.op == "!=":
            if (type(ctx.e1.accept(self, None)) == type(ctx.e2.accept(self, None))):
                return bool()
            else:
                raise TypeMismatchInExpression(ctx)
    
    def visitUnOp(self,ctx:UnOp,o):
        if ctx.op == "-":
            if isinstance(ctx.e.accept(self, None), bool):
                raise TypeMismatchInExpression(ctx)
            elif  isinstance(ctx.e.accept(self, None), int):
                return int()
            elif isinstance(ctx.e.accept(self, None), float):
                return float()
        elif ctx.op == "!":
            if isinstance(ctx.e.accept(self, None), bool):
                return bool()
            raise TypeMismatchInExpression(ctx)

    def visitIntLit(self,ctx:IntLit,o):
        if isinstance(ctx.val, int):
            return int()
        raise TypeMismatchInExpression(ctx)
        
    def visitFloatLit(self,ctx,o):
        if isinstance(ctx.val, float):
            return float()
        raise TypeMismatchInExpression(ctx)
        
    def visitBoolLit(self,ctx,o):
        if isinstance(ctx.val, bool):
            return bool()
        raise TypeMismatchInExpression(ctx)
        

	
BinOp("+",IntLit(3),BoolLit(True))
Type Mismatch In Expression: BinOp("+",IntLit(3),BoolLit(True))
	
BinOp("*",BinOp("+",IntLit(3),FloatLit(3.4)),BinOp(">",IntLit(3),FloatLit(2.1)))
Type Mismatch In Expression: BinOp(">",IntLit(3),FloatLit(2.1))

BinOp("&&",BinOp(">",BinOp("-",IntLit(3),FloatLit(3.4)),UnOp("-",FloatLit(2.1))),UnOp("-",BoolLit(True)))
Type Mismatch In Expression: UnOp("-",BoolLit(True))

UnOp("-",BinOp(">",BinOp("-",IntLit(3),FloatLit(3.4)),UnOp("-",FloatLit(2.1))))
Type Mismatch In Expression: UnOp("-",BinOp(">",BinOp("-",IntLit(3),FloatLit(3.4)),UnOp("-",FloatLit(2.1))))
	
BinOp(">",BinOp("&&",BoolLit(True),BoolLit(False)),BinOp("||",BoolLit(True),UnOp("-",FloatLit(2.3))))
Type Mismatch In Expression: BinOp("||",BoolLit(True),UnOp("-",FloatLit(2.3)))

UnOp("!",BinOp("==",IntLit(3),BinOp("*",IntLit(5),IntLit(7))))
Chính xác
Chính xác	

UnOp("!",BinOp("==",IntLit(3),BinOp("/",IntLit(5),IntLit(7))))
Type Mismatch In Expression: BinOp("==",IntLit(3),BinOp("/",IntLit(5),IntLit(7)))
	
UnOp("!",BinOp("-",IntLit(3),BinOp("/",IntLit(5),IntLit(7))))
Type Mismatch In Expression: UnOp("!",BinOp("-",IntLit(3),BinOp("/",IntLit(5),IntLit(7))))

BinOp("/",IntLit(8),BinOp("<",IntLit(3),IntLit(8)))
Type Mismatch In Expression: BinOp("/",IntLit(8),BinOp("<",IntLit(3),IntLit(8)))
	
BinOp("||",BoolLit(True),BinOp("<",IntLit(3),IntLit(8)))

